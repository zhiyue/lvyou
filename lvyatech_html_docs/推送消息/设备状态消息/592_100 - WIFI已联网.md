# 100 - WIFI已联网

---
- **页面ID**: 592
- **作者ID**: 1
- **创建时间**: 2025-07-02 23:32:09
- **分类ID**: 189
---

###“消息：100 - WIFI已联网” 使用说明

####消息的作用
100消息，是开发板向接口推送的第1个消息。表示开发板已经正确连入了WIFI网络。
－
####消息参数说明
 | 参数名  | 参数值（示例）  |参数类型|说明|
| ------------ |:------------ |-----|--|
|devId |498060912345 |字符型|开发板唯一ID|
|type |100|数值型|消息ID|
|hwVer |107|字符型|开发板版本号|
|netCh  | 0 |数值型|本消息由开发板的哪个网络通道推送。0:WIFI; 1:SIM1; 2:SIM2|
|msgTs  | 1750044391 |数值型| 当前消息的时间戳|
|ssid |mywifi |字符型|开发板连入的WIFI名|
|charset |mywifi |字符型（*注1）|WIFI名的编码方式|
|ip  | 192.168.7.170 |字符型|开发板当前IP地址|
|dbm | utf8  |数值型|ssid的信号强度（越高越好）|

**注1**：ssid字段的默认编码，目前是固定值：utf8
　
####消息内容（FORM)
FORM格式时，开发板自动模拟的HTML表单提交，将数据推送到您的接口。
模拟样式如下：
```
<form>
	<input name="devId" value="498060912345">
	<input name="type" value="100">
	<input name="hwVer" value="X31v107">
	<input name="netCh" value="0">
	<input name="msgTs" value="1750044391">
	<input name="ssid" value="mywifi">
	<input name="charset" value="utf8">
	<input name="ip" value="192.168.7.170">
	<input name="dbm" value="61">
</form>
```
　
####消息内容（JSON)
JSON格式时，开发板向您的接口推送的JSON样式如下：
 ``` 
{
  "devId": "498060912345",
  "type": 100,
  "hwVer": "X31v107",
  "netCh": 0,
  "msgTs": 1750044391,
  "ssid": "mywifi",
  "charset": "utf8",
  "ip": "192.168.7.170",
  "dbm": 61
} 
```
　
 ####请注意：
- 如果您的接口是HTTP方式，开发板向您的接口推送100消息时，您的HTTP接口可以不返回数据。但是，接口的WEB服务器返回HTTP CODE值必须为200，否则，开发板会自动尝试连接其它WIFI热点（如有），并重新推送100消息，直到HTTP CODE能够返回200。
- 如果您的接口是TCP方式，开发板向您的接口推送100消息时，您的接口 **必须** 返回以下格式的应答：
```json
{"cmd":"now", "p1":"20220330184700", "tid":"1234"}\x11\x12
```
即，返回14位当前时间做为应答。此应答必须在5秒内完成，否则将视为TCP链接建立失败。正常情况下，您的接口给出上述应答之后，开发板将再次回复一个“应答已收到”的消息给您的接口，格式如下：
```json
{"code":0, "type":999, "netCh":0, "tid":"1234"}\x11\x12
```
至此，开发板与您的接口之间TCP网络建立成功。

- 如果您的开发板连入的WIFI热点可以正常访问Internet，您的TCP接口在接收到100消息时也可以不返回具体的时间戳，而是让开发板自身通过全球公共NTP服务自主校准时间。这种情况下，您的接口收到开发板上报的100消息时，可以按以下格式进行应答：
```json
{"cmd":"now", "p2":15, "p3":8}
```
此处，P2=15 表示允许开发板自身通过各种可能的途径进行时间校准；p3=8表示校准后的时区是+8（北京时间）。

