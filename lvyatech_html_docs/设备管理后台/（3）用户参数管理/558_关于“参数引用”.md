# 关于“参数引用”

---
- **页面ID**: 558
- **作者ID**: 1
- **创建时间**: 2025-06-21 14:21:50
- **分类ID**: 176
---

#### 关于“引用参数”的说明
　　您可以在用户参数“值”中引用“系统参数”（系统参数管理中定义），或引用已经定义的“用户参数”。
　　引用“系统参数”的格式为：```{{系统参数名}}``` 。引用“用户参数”的格式为：```{{{用户参数名}}}`` 。
  
  >总结：
　　用 **两层大括号** 引用“系统参数”，用 **三层大括号** 引用“用户参数”。
  
  **举例说明如下：**
　　（2.1）定义一个用户参数名为：devName ，参数值为：“设备名{{devId}}”。注意，这里的“参数值”中，引用了系统参数 “devId” 。定义好的用户参数示例如下：
  ![](images/492e29e6_63d34afca2821.png)
  
　　用户参数定义完成之后，当开发板在向接口上报数据时，会在原有上报数据的基础上，额外添加“devName”这个参数，并且将devName的值进行替换，将值里面的“引用”参数，替换为实真实的数据，像下述所示：
```json
{ 
	……其它数据……,
	"devName" : "设备名498060912345"   /* {{devId}}对应的开发板唯一ID为 498060912345 */
} 
```
　　在此例中，参数值中引用的{{devId}}在实际执行时，首先被替换为设备的唯一ID，然后将替换后的结果上报到接口。

------------

　　（2.2）继续上例说明引用“用户参数”的情况。假如再额外定义一个用户参数名为：content，参数值为：“{{{devName}}}，已经成功连入WIFI网络！”。定义好的用户参数示例如下：
  ![](images/b95d6bae_63d34c7d2437b.png)
>注意：
　　在content的参数值中，又引用了示例中定义了另一个用户参数“devName”
  
　　这种情况下，开发板在向接口上报数据时，会同时添加2个用户参数，并且对值进行计算。实际上报的数据格式是：
```json
{ 
	……其它数据……,
	"devName" : "设备名498060912345",   /* {{devId}}对应的开发板唯一ID为 498060912345 */
	"content" : "设备名498060912345，已经成功连入WIFI网络！"
}
```
　　在此例中，参数值中引用的{{{devName}}}在实际执行时，首先被替换为devName的值，然后将替换后的结果上报到接口。

------------

　　（2.3）继续上例说明“**启用**”字段的用法。假如在上报接口时，并不希望开发板向接口上报“devName”这个字段，“devName”字段仅仅是“只定义”，不希望在接口数据中体现出来，可以将“devName”字段改为“不启用”，参见下图：
　　![](images/6d95bf9a_63ce84982653c.png)
　　只需要将“启用”字段设置为“不启用”即可。此时，对于不启用的用户变量，允许被引用，但不在最终接口上报的数据中体现。实际上报的数据格式是：
```json
{
	……其它数据……,
	"content" : "设备名498060912345，已经成功连入WIFI网络！"
}
```

------------

　　（2.4）“引用”不仅仅可以用在“用户参数值”中，也可以在“接口地址”中添加对“系统变量”或“用户变量”的引用。
假如我们有多块开发板，因为某种特殊的原因，希望每一块开发板都向“特定的”HTTP接口地址上报数据，那么可以在接口地址中直接添加对devId的引用，如下图所示：
　　![](images/a3ab18a7_63ce877ce9fa8.png)
  
　　比如，接口地址的填写内容为：`https://www.domain/api/{{devId}}_send/`，将来在开发板向接口地址上报数据时，接口地址会首先被计算，计算后的真实的接口地址是：`https://www.domain/api/498060912345_send/`。通过这种方式，我们就可以实现让每一块开发板，都有自己独立的接口地址。
　　
　　同样的，接口地址中不仅仅可以引用“系统参数”，也可以引用“用户参数”。用法类似，在此就不在展开赘述了。
  
###开发板中允许引用参数的项目：
1）“用户参数管理”功能中，所有“值”的位置：
![](images/948657c5_68564d9963b8b.png)
-

2）“接口信息配置”中，URL地址与http头的值：
![](images/1e43111c_68564e38b213f.png)

-

3）“自定义接口消息”中的所有消息内容：
![](images/ef044f7f_68564e9820186.png)


-

4）“通讯加密”中的“Token生成策略”：
![](images/b874b066_68564f06a8d76.png)

-

5）“运行参数管理”中标记为允许写计算式的项目：
![](images/0854974e_68564f5897364.png)