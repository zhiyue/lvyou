# 接口消息设置

---
- **页面ID**: 553
- **作者ID**: 1
- **创建时间**: 2025-05-15 18:39:01
- **分类ID**: 174
---

　　开发板自身在运行期间会发生多种“状态变化”，当某些“状态”发生变化时，开发板就会触发消息上报的处理，将相关状态数据打包后主动向接口上报。
　　“**接口消息设置**”用于设置将开发板的哪些消息，允许向接口上报。一般来说，这里只需要设置您的接口所需要关心的消息即可，对于您不关心的消息，可以选择不上报。
  

####接口消息设置界面：
![](images/258f532e_6825bc7d7d4da.png)
　　
####一、已联网消息：
　　（1）**100（WIFI已联网）消息：**当开发板正确连入了您指定的WIFI网络时，开发板将向接口上报100消息，表示开发板本身已经通过WIFI联网成功。
　　（2）**101（卡槽1已联网）消息：**当开发板已经连入了卡槽1网络时，开发板将向接口上报101消息，表示开发板本身已经通过卡槽1联网成功。
　　（2）**102（卡槽1已联网）消息：**当开发板已经连入了卡槽2网络时，开发板将向接口上报102消息，表示开发板本身已经通过卡槽2联网成功。

> **注意：**
　　由于目前HTTP接口只允许使用WIFI网络，所以，使用HTTP接口时，将只能够获取到100消息。如果您的接口是TCP接口，则可能会获取到100、101、102三种消息中的任意一种。

------------

> **【小提示】**
　　开发板在通电开机之后，首先做的第一件事情是尝试完成开发板的联网。所以，合理利用100、101、102消息，可以实现监测开发板是否已经开机。

  
　　
####二、SIM卡消息：
　　（1）**202（SIM卡基站注册中）消息：**当您向开发板插入SIM卡时，开发板会对SIM卡进行初始化。SIM卡初始化过程包括监测SIM卡本身是否能正常工作，以及驱动SIM卡向运营商基站注册等工作。开发板在执行SIM卡初始化的动作之前，会首先向接口上报202消息，提示SIM卡已经插入，并且正在进行初始化。
  
　　（2）**203（SIM卡ID已经获取）消息：**SIM卡的ICCID、IMSI、MSISDN是SIM卡的三个基本参数。当SIM卡初始化完成后，会向接口上报关于当前SIM卡的ICCID、IMSI、MSISDN三个基本信息。
  
>  **ICCID**为SIM本身的集成电路ID。此ID通常被印刷在SIM的背面，并且在SIM卡本身更换时（如补卡）发生改变。
  **IMSI**为SIM卡的运营商识别ID。此ID是与电话号码一一对应的（但IMSI不是电话号码），IMSI可以在逻辑上唯一标识一张卡，即使SIM卡本身发生更换（如补卡后），IMSI也不会改变。
  **MSISDN**为通常意义上的“手机号”，MSISDN由运营商在发卡时进行预置。但是随着客户隐私保护的不断深入，越来越多的新卡，在出厂时并不会预置“手机号”。所以，在很多的手机卡上 MSISDN 通常都是空白值。
  
　　（3）**204（SIM卡已就绪）消息：**当接口收到204消息时，表示SIM卡已经完成了所有的初始化工作，SIM卡本身已经可以正常的接打电话、收发短信了。
  
　　（4）**205（SIM卡已弹出）消息：**如果在开发板开机的过程中，用户主动的取走了开发板中的SIM卡，则对应的接口上会收到205消息，表示SIM已经被取出。
  
　　（5）**209（SIM卡异常）消息：**如果开发板无法正确的完成对SIM卡的初始化工作，则会向接卡上报209消息。通常而言，如果开发板上报209消息，一般可能是如下几种原因：
　　（5.1）SIM卡欠费停机。补缴话费后可以自动恢复；
　　（5.2）SIM卡插卡不良。未能正确插卡（如SIM卡与卡套安装不良）；
　　（5.3）SIM卡已损坏。这里指SIM的物理损坏，需考虑重新补卡；
　　（5.4）SIM卡已被封停。具体原因请咨询手机卡的运营商；
  
> **注意：**
　　203、204消息一般是大致在**同一时间内**先后接收到，但是接收的顺序可能是不确定的。即，有可能先接收到204消息，然后再接收到203消息。
  
　　
####三、通讯模组消息：
　　（1）**301（通讯模组错误）消息：**当您向开发板插入SIM卡时，开发板会首先对通讯模组进行初始化。如果通讯模组初始化失败，开发板会向接口发送301消息。一般而言，如遇301错误，通常为开发板损坏。
    
　　
####四、命令应答消息：
　　您可以通过向开发板发送“命令”，让开发板完成命令指定的动作，比如通过命令获取开发板的当前状态，或通过命令控制开发板向外发送短信或拨打电话等等。
　　（1）**401（命令已收到）消息：**当您向开发板发送命令后，如果开发板收到了您的命令，会立即返回401消息，表示命令已经成功接收。
  
　　（2）**402（命令已处理）消息：**当您向开发板发送命令后，如果开发板对您的命令已经处理完成，会立即返回402消息，表示您的命令已经执行完成。
  
　　
####五、短信消息：
　　（1）**501（新短信）消息：**当开发板上的SIM卡收到了新的短信时，会向接口上报501消息。501消息中会包括短信号码、短信内容、短信时间以及卡槽编号等必要的信息。
  
　　（1）**502（短信外发成功）消息：**当您通过控制指令遥控开发板的SIM卡向外发短信时，如果短信发送成功，则开发板会向接口上报502消息。需要注意的是，如果外发短信不成功，则开发板不会给出任何消息提示。在实际的使用过程中，当外发短信的控制指令被成功执行起算，超过30秒仍然收不到502消息，则一般认为是短信外发失败。如果SIM卡在某个时点之后，短信外发始终都不能成功，则优先考虑SIM卡本身话费是否充足（外发短信一般需要在运营商层面扣除话费）。
  
　　
####六、电话消息：
　　（1）**601（来电振铃）消息：**当开发板上的SIM卡收到了来电，本机处于来电振铃状态时，开发板会向接口上报601消息，表示有电话正在呼入，等待接听中。
  
　　（2）**602（来电接通）消息：**当开发板正在处于来电振铃状态时，给开发板发送“接听来电命令”时，开发板会立即接听本次来电，并向接口端上报602消息，表示本次来电已成功接听。
  
　　（3）**603（对方挂断来电）消息：**当开发板上的SIM卡收到了来电，在呼叫方挂断电话之后（本次来电结束），开发板会向接口上报603消息。603消息中会包括来电号码、来电时间、对方挂断时间以及卡槽编号等必要的信息。
  
　　（4）**620（去电拨号中）消息：**当开发板的电话处于空闲状态时，给开发板发送“电话外呼拨号命令”时，开发板会首先尝试向对方号码拨打电话，在处于拨号中的环节时，开发板会向接口上报620消息，表示正在拨打对方号码。
  
　　（5）**621（去电对方振铃中）消息：**当开发板外呼拨号完成后，对方手机开始振铃时，开发板会向接口上报621消息，表示电话外呼拨号已经成功，对方手机正在振铃中，等待对方接听。
  
　　（6）**622（去电已接通）消息：**当开发板外呼拨号对方振铃后，对方主动接听了本次来电，开发板会向接口上报622消息，表示对方已经接听电话。
  
　　（7）**623（去电已挂断）消息：**当开发板外呼通过中，对方主动挂断电话，或开发板自身通过“本地挂机命令”主动挂断了电话，开发板会向接口上报623消息，表示本次通话已经结束。
  
　　（8）**641（通过中本地按键）消息：**当开发板处于通话中的状态时，开发板自身通过“本地按键命令”按下了某些按键，开发板会向接口上报641消息，表示开发板自身在通话中的按键动作已经完成。
  
　　（9）**642（通过中远程按键）消息：**当开发板处于通话中的状态时，对方在电话机中按下了某些按键时，开发板会向接口上报642消息，表示对方在通话中的按键已完成。
    
　　
####七、电话控制回应消息：
　　（1）**681（外呼拨号成功）消息：**向开发板发送“电话外呼拨号命令”时，开发板会立即控制手机卡向指定号码进行拨号。当拨号成功时，开发板会向接口上报681消息，表示电话外呼拨号已经成功。
  
　　（2）**682（外呼拨号失败）消息：**向开发板发送“电话外呼拨号命令”时，开发板会立即控制手机卡向指定号码进行拨号。当拨号失败时，开发板会向接口上报682消息，表示本次电话外呼拨号失败。（可能的原因一般包括：卡故障、卡欠费等）
  
　　（3）**684（接听成功）消息：**当开发板处于“来电振铃”状态时，向开发板发送“电话接听命令”，开发板会立即尝试接听本次来电。当来电接听成功时，开发板会向接口上报684消息，表示本次来电已经成功接听。
  
　　（4）**685（接听失败）消息：**当开发板处于“来电振铃”状态时，向开发板发送“电话接听命令”，开发板会立即尝试接听本次来电。当来电接听失败时，开发板会向接口上报685消息，表示本次来电未接成功接听。
  
　　（5）**687（TTS播放成功）消息：**当开发板处于“通话中”状态时，向开发板发送“TTS播放命令”，开发板会立即向本次通话中的对方播放指定的语音内容。当语音内容被成功播放时，开发板会立即向接口上报687消息，表示指定的语音内容已经开始播放。
  
　　（6）**688（TTS播放失败）消息：**当语音内容被不能成功播放时，开发板会立即向接口上报688消息，表示指定的语音内容未能成功播放。（比如不在通话中状态等）
  
　　（7）**689（TTS播放结束）消息：**当语音内容被完整的播放完成后，开发板会立即向接口上报689消息，表示指定的语音内容已经完整的播放完成。
　　
####八、其它消息：
　　（1）**998（PING）消息：**开发板在运行期间，会定时向接口上报PING消息。表示开发板已经开机且工作正常。通常来说，HTTP接口一般不需要处理998消息。但TCP接口则必须接收本消息，并以此判断客户端（开发板一侧）的TCP链接正常。在TCP接口模式下，998消息无论您是否勾选，998消息会始终向您的TCP接口推送。
  
> **【小提示】**
　　通常可以用定时监测998消息的方法，确定开发板是否已经处于开机工作中的状态。比如，可以将PING消息设置为每60秒主动触发一次，然后接口端如果连续2次或3次都没有接收到998消息，则可以认为开发板网络断开且无法联网了 或是 开发板关机了。

