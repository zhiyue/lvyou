# 附加函数概述

---
- **页面ID**: 562
- **作者ID**: 1
- **创建时间**: 2025-06-21 14:05:03
- **分类ID**: 179
---

　　在开发板中引用 ***系统参数*** 或 ***用户参数*** 时，可以在参数后面，添加***附加函数***，对数据进一步处理。
  
　　例如，引用系统参数：{{devId}} 获取设备ID时，希望最终获取到 大写格式 的设备ID，则可以编写以下计算式：
 ``{{devId|$toUpper()}}`` 
　　在此计算式中，先是引用了一个系统参数，然后对devId的值通过***附加函数*** $toUpper() 将其转大写格式。。
  
　　***附加函数***可以同时引用多个，如果需要引用管理员密码 {{ADMIN_PWD}} 的值，但不希望直接获取到 {{ADMIN_PWD}} 的明文，而是获取对应的16字节md5值的大写格式，可以编写以下计算式：
``{{ADMIN_PWD|$md5('16')|$toUpper()}}``
　　在此计算式中，先获取ADMIN_PWD的值（管理员密码明文），然后对明文进行MD5计算，并取16字节的哈希值（结果类似于：4f2d8fac2345dfa8），最后对哈希值转为大写输出：4F2D8FAC2345DFA8

```text
总结：
1）所有的附加函数都是 $ 开头，格式为： $函数名('参数')。
2）在参数中添加附加函数时，必须以 | 分隔。
3）一个参数中，可以同时添加多个附加函数。
```

>注意！
- 附加函数严格区分大小写。
- 附加函数中的参数，无论参数类型，都必须用**单引号**囊括。

###扩展示例：


　　**（示例１）：**
　　引用 {{devId}} 获取设备ID时，希望获取到 设备ID（devId) 的大写值，并对 大写设备ID值 进行MD5计算，最终获取到 设备ID 大写值的16位MD5值。计算式写为：：
 ``{{devId|$toUpper()|$md5('16')|$toUpper()}}`` 
  
-
　　**（示例２）：**
　　附加函数的参数，也可以是一个另一个系统参数或用户参数，例如：
  
``{{devId|$concat('-', '{{now}}', '-', '{{ip}}')}}``

计算的最终结果是：`` 23d64887Fa-1725644897-192.168.1.12 ``

这个计算式的计算过程是：先获取devId的值（23d64887Fa），然后与$concat()中指定的4个参数逐一拼接：
```
拼接$concat()的参数1： 23d64887Fa-
拼接$concat()的参数2： 23d64887Fa-1725644897
拼接$concat()的参数3： 23d64887Fa-1725644897-
拼接$concat()的参数4： 23d64887Fa-1725644897-192.168.1.12
```
-
　　**（示例３）：**
　　附加函数的参数可以是另外一个系统参数或用户参数，但是，引用的参数中的附加函数不允许再携带参数，例如：
  
  ***正确***：``{{devId|$concat('-', '{{ip|$trim()}}') }}``
　　=> $concat()函数的参数２，引用系统参数ip以及不带参数的附加函数$trim()
  
  ***错误***：``{{devId|$concat('-', '{{ip|$replace('.', ';')}}') }}``
　　=> $concat()函数的参数２，引用系统参数ip以及***带参数***的附加函数$replace()

　　解决此类问题的方法是，把 {{ip|$replace('.', ';')}}定义为一个单独的“用户参数”，在$concat()中引用这个“用户参数”即可。例如：
  
　　在用户参数管理中定义一个用户参数：
　　```用户参数名：ip_fmt　　用户参数值：{{ip|$replace('.', ';')}}```
  
　　然后将计算式改写为：  ``{{devId|$concat('-', '{{{ip_fmt}}}') }}``
  
