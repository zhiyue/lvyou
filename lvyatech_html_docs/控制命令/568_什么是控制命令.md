# 什么是控制命令

---
- **页面ID**: 568
- **作者ID**: 1
- **创建时间**: 2025-05-15 19:09:10
- **分类ID**: 181
---

###什么是控制命令？
　　**控制命令**是由您（或接口）主动发送给开发板，通知开发板执行对应的操作。相应的，开发板收到“命令”并执行，执行的结果以“消息”的方式反馈给您（或接口）。
```seq
您的接口-开发板:&rarr;　　　　　控制命令　　　　　&rarr;
开发板--您的接口:&larr;　　　　　推送消息　　　　　&larr;
```

###控制指令的示例
　　以获取**开发板当前状态(stat)**的命令为例，说明控制命令的构成：
  ```
  http://192.168.7.170/ctrl?token=3f4bffa77257d243875d0a5a80635934&cmd=stat
  ```
 　　`http://192.168.7.170/ctrl`这是控制命令的固定开头。其中`192.168.7.170`是开发板的当前IP地址，实际使用中需要替换成您的开发板真实的IP地址。
 　　`:38585`是开发板固定的WEB端口号。
 　　`?token=3f4bffa77257d243875d0a5a80635934`**token**所有控制命令的所必须的一个参数，具体**token**的获取方法，请参阅**安全模型与token机制**的相关章节。
 　　`&cmd=stat`**cmd**是控制命令所必须的另一个参数。用于指明开发板具体执行什么动作。
   
 　　这条**控制命令**的作用是，获取开发板当前的各项状态，您可以尝试在浏览器上输入这个URL，之后开发板会以JSON格式返回当前自身的状态信息，示例如下：
   
 ``` 
 {
  "devId": "498060912345",　　//当前开发板唯一ＩＤ
  "schRstHour": 4,			//开发板每日定时重启时间，默认凌晨4点
  "pingSec": 110,			//开发板主动推送PING消息（998）的间隔秒数
  "wifi": {
    "ssid": "mywifi",		//当前连入的WIFI热点名
    "ip": "192.168.7.170",	//当前开发板的IP地址
    "dbm": 21				//当前WIFI的信号强度
  },
  "slot": {
    "slot1_sta": "ERR",		//卡槽1通信模组状态：异常（不可识别）
    "slot2_sta": "POWON",	//卡槽2通信模组状态：正常开机
    "sim2_op": "T",			//卡槽2中SIM卡所属运营商：中国电信
    "sim2_dbm": "99",		//卡槽2中SIM卡的信号强度：99%
    "sim2iccId": "89860321745322212345",	//卡槽2中SIM卡的ICCID
    "sim2_sta": "OK"		 //卡槽2中SIM卡的当前状态：正常就绪
  },
  "time":"220618101522"		//开发板当前时间yymmddhhmmss
} 

 ```
 　　如果您使用TCP接口与设备通信，可以用下面的消息获取设备状态：
   ```
   {"cmd":"stat", "tid":"1234"}\x11\x12
   ```
 　　注意：TCP接口通信时，每一条消息最后都必须附加2个字节的结束符，用于表示消息的结束。2个字节的结束符必须是0x11 0x12。即结束符第一个字节是0x11，第二个字节是0x12。
   ```
   注意：
   0x11 0x12 分别代表2个字节，不要写成字符串。
   ```

